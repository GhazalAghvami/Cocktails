!function(){"use strict";function e(e,t,o){e.state("Home",{url:"/",templateUrl:"views/Home.html"}).state("AddRecipe",{url:"/addrecipe/:id",templateUrl:"views/AddRecipe.html"}).state("EditRecipe",{url:"/editrecipe/:id",templateUrl:"views/EditRecipe.html"}).state("AddCommunity",{url:"/addcommunity",templateUrl:"views/AddCommunity.html"}).state("ViewCommunity",{url:"/viewcommunity/:id",templateUrl:"views/ViewCommunity.html"}).state("RegLog",{url:"/reglog",templateUrl:"views/RegLog.html"}).state("Profile",{url:"/profile/:id",templateUrl:"views/profile.html"}),t.otherwise("/"),o.interceptors.push("AuthInterceptor")}e.$inject=["$stateProvider","$urlRouterProvider","$httpProvider"],angular.module("app",["ui.router","ngMaterial"]).config(e)}(),function(){"use strict";function e(e,t){var o=this;o.community={},o.addCommunity=function(){e.addCommunity(o.community).then(function(e){console.log(o.community),t.go("Home")})},o.colors=["#f5f5f5","#b9f6ca","#ff80ab","#ffff8d","#84ffff","#80d8ff","#448aff","#b388ff","#8c9eff","#ff8a80"],o.icons=["zmdi zmdi-drink","zmdi zmdi-cocktail","zmdi zmdi-cutlery","zmdi zmdi-eyedropper","zmdi zmdi-fire","zmdi zmdi-flash","zmdi zmdi-mood-bad","zmdi zmdi-mood"]}e.$inject=["CommunityFactory","$state"],angular.module("app").controller("AddCommunityController",e)}(),function(){"use strict";function e(e,t,o){var i=this;i.recipe={},i.recipe.ingredients=[],i.createRecipe=function(){e.postRecipe(i.recipe,o.id).then(function(e){t.go("ViewCommunity",{id:o.id})},function(e){i.recipe=e})},i.goToViewCom=function(){t.go("ViewCommunity",{id:o.id})},i.colors=["#f5f5f5","#b9f6ca","#ff80ab","#ffff8d","#84ffff","#80d8ff","#448aff","#b388ff","#8c9eff","#ff8a80"]}e.$inject=["HomeFactory","$state","$stateParams"],angular.module("app").controller("AddRecipeController",e)}(),function(){"use strict";function e(e,t,o){var i=this;i.editRecipe={},i.editRecipe.ingredients=[],t.id&&e.getOneRecipeToEdit(t.id).then(function(e){i.editRecipe=e}),i.updateRecipe=function(t){console.log(t),e.updateRecipe({recipeEditted:t}).then(function(e){o.go("ViewCommunity",{id:t.community},{location:!0})})},i.goToViewComFromEdit=function(e){o.go("ViewCommunity",{id:e.community},{location:!0})}}e.$inject=["CommunityFactory","$stateParams","$state"],angular.module("app").controller("EditRecipeController",e)}(),function(){"use strict";function e(e,t){var o=this;o.isLogin=!0,o.user={},o.status=e.status,o.logout=function(){e.logout(),t.go("Home")},o.register=function(){e.register(o.user).then(function(){t.go("Home")})},o.login=function(){e.login(o.user).then(function(){t.go("Home")})}}e.$inject=["UserFactory","$state"],angular.module("app").controller("GlobalController",e)}(),function(){"use strict";function e(e,t){var o=this;e.getAllCom().then(function(e){o.communities=e}),o.goToCom=function(o){e.goToCom(o).then(function(e){t.go("ViewCommunity",{id:o})})}}e.$inject=["HomeFactory","$state"],angular.module("app").controller("HomeController",e)}(),function(){"use strict";function e(e,t){var o=this;o.status=t.status,t.getAllByUser(o.status._id).then(function(e){o.recipearray=e,console.log(o.recipearray),console.log(o.recipearray.communities),console.log(o.recipearray.recipes)})}e.$inject=["$stateParams","UserFactory"],angular.module("app").controller("ProfileController",e)}(),function(){"use strict";function e(e,t,o,i){var n=this;n.status=t.status,o.id&&e.getAllRecipes(o.id).then(function(e){n.recipes=e}),n.deleteRecipe=function(t){e.deleteRecipe(t._id).then(function(){n.recipes.splice(n.recipes.indexOf(t),1)})},n.goToAddRecipe=function(){n.status.username?i.go("AddRecipe",{id:o.id}):(alert("You Must Be Logged In To Add Recipe!"),i.go("RegLog"))},o.id&&e.getSingleCom(o.id).then(function(e){n.communities=e}),n.deleteCommunity=function(){var t=confirm("Are You Sure You'd Like To Delete?");t?e.deleteCommunity({id:o.id}).then(function(){i.go("Home")}):i.go("ViewCommunity",{id:o.id})},n.editRecipe=function(e){console.log(e,2),i.go("EditRecipe",{id:e})},n.getCopy=function(e){return angular.copy(e)},n.editCom=function(t){e.editCom(t,{id:o.id}).then(function(e){n.editedCom=null,n.communities.name=t.name})}}e.$inject=["CommunityFactory","UserFactory","$stateParams","$state"],angular.module("app").controller("ViewCommunityController",e)}(),function(){"use strict";function e(e){var t={request:function(t){return e.localStorage.getItem("token")&&(t.headers.authorization="Bearer "+e.localStorage.getItem("token")),t}};return t}e.$inject=["$window"],angular.module("app").factory("AuthInterceptor",e)}(),function(){"use strict";function e(e,t){var o={};return o.addCommunity=function(o){var i=t.defer();return e.post("/api/community",o).then(function(e){i.resolve(e.data)}),i.promise},o.getAllRecipes=function(o){var i=t.defer();return e.get("/api/recipe/"+o).then(function(e){i.resolve(e.data)}),i.promise},o.deleteRecipe=function(o){var i=t.defer();return e["delete"]("/api/recipe/"+o).then(function(e){i.resolve()}),i.promise},o.editCom=function(o,i){var n=t.defer();return console.log(o),console.log(i.id),e.put("/api/community/"+i.id,o).then(function(e){n.resolve(e.data)}),n.promise},o.getOneRecipeToEdit=function(o){console.log(o);var i=t.defer();return e.get("/api/recipe/edit/"+o).then(function(e){console.log(e),i.resolve(e.data)}),i.promise},o.updateRecipe=function(o){console.log(o);var i=t.defer();return e.put("/api/recipe",o).then(function(e){i.resolve(e.data)}),i.promise},o.getSingleCom=function(o){var i=t.defer();return e.get("/api/community/"+o).then(function(e){i.resolve(e.data)}),i.promise},o.deleteCommunity=function(o){var i=t.defer();return e["delete"]("/api/community/"+o.id).then(function(e){i.resolve()}),i.promise},o}e.$inject=["$http","$q"],angular.module("app").factory("CommunityFactory",e)}(),function(){"use strict";function e(e,t){var o={};return o.postRecipe=function(o,i){for(var n=t.defer(),r=0;r<o.ingredients.length;)o.ingredients[r]?r++:o.ingredients.splice(r,1);return o.ingredients.length<1?n.reject(o):e.post("/api/recipe/"+i,o).then(function(e){n.resolve(e)}),n.promise},o.getAllCom=function(){var o=t.defer();return e.get("/api/community").then(function(e){o.resolve(e.data)}),o.promise},o.goToCom=function(o){var i=t.defer();return e.get("/api/community/"+o).then(function(e){i.resolve(e.data)}),i.promise},o}e.$inject=["$http","$q"],angular.module("app").factory("HomeFactory",e)}(),function(){"use strict";function e(e,t){function o(){var e=JSON.parse(u(n().split(".")[1]));a.status.username=e.username,a.status._id=e._id}function i(){a.status.username=null,a.status._id=null}function n(){return localStorage.getItem("token")}function r(e){return localStorage.setItem("token",e)}function c(){return localStorage.removeItem("token")}function u(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}return decodeURIComponent(escape(window.atob(t)))}var a={};return a.status={},a.register=function(i){var n=t.defer();return e.post("/api/users/register",i).then(function(e){r(e.data),o(),n.resolve(e.data)}),n.promise},a.login=function(i){var n=t.defer();return e.post("/api/users/login",i).then(function(e){r(e.data),o(),n.resolve(e.data)}),n.promise},a.logout=function(){c(),i()},n()&&o(),a.getAllByUser=function(o){console.log("here");var i=t.defer();return e.get("/api/users/profile/"+o).then(function(e){console.log(e),i.resolve(e.data)}),i.promise},a}e.$inject=["$http","$q"],angular.module("app").factory("UserFactory",e)}();